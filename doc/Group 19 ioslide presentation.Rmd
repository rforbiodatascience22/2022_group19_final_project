---
title: "Group 19 presentation"
author: "Rasmus, Mikkel, Lasse"
date: '2022-05-07'
output: ioslides_presentation
---

```{r, include = FALSE}
# Load libraries 
suppressPackageStartupMessages(library("tidyverse"))
library("readxl")
library("rmarkdown")
library("knitr")
```


## Project data{.centered}

![](images/project_data_explained.png){width=90%}



<<<<<<< HEAD
=======
## Flow chart or flowchart




>>>>>>> 907e55c95fec2abb752cf86428c17752023b7efa


## Project data

![Raw excel-file contains several sheets](images/project_data_raw.png){width=90%}






## Loading data{.smaller}

read_excel("data/_raw/project_data_raw.xlsx")

```{r}
setwd("/cloud/project")

test <- read_excel("data/_raw/project_data_raw.xlsx")

test
```


## Loading data - merging sheets{.smaller}

<<<<<<< HEAD
sheet <- excel_sheets("data/_raw/project_data_raw.xlsx")

data_frame <- lapply(setNames(sheet, sheet), 
                       function(x) read_excel("data/_raw/project_data_raw.xlsx", sheet = x))

data_frame <- bind_rows(data_frame, 
                        .id = "Sheet")

```{r, echo = F}
# Load data ---------------------------------------------------------------
# Set working directory
=======
```{r}
>>>>>>> 907e55c95fec2abb752cf86428c17752023b7efa
setwd("/cloud/project")

# Accessing all excel sheets 
sheet <- excel_sheets("data/_raw/project_data_raw.xlsx")

# Creating a list of individual data frames for each sheet
data_frame <- lapply(setNames(sheet, sheet), 
                       function(x) read_excel("data/_raw/project_data_raw.xlsx", 
                                              sheet = x))

# Attaching individual data frames together
data_frame <- bind_rows(data_frame, 
                        .id = "Sheet")
data_frame
```





## Data wrangling before plotting log-fold change graph

```{r results = 'hide', message = FALSE}
##R code
setwd("/cloud/project")

my_data_clean_aug <- read_csv(file = "data/03_project_data_clean_aug.csv")

```

```{r echo = TRUE}
#Setting the threshold
threshold <- my_data_clean_aug %>% 
  count(Origin) %>% 
  filter(n > 50) %>% 
  count() %>% 
  pull()

#Pooling all groups of vira with less than 50 hits into 'Other'
my_data_clean_aug_pooling <- my_data_clean_aug %>% 
  mutate(Origin = as.factor(Origin)) %>% 
  mutate(newID = fct_lump(Origin, threshold)) %>% 
  mutate(value = case_when(log_fold_change <= 2 ~ 0,
                           0.001 < p & log_fold_change >= 2 ~ 0,
                           0.001 >= p & log_fold_change >= 2 ~ 1))

```






## Slide with Plot

![](/cloud/project/results/04_dotplot.png){width=100%}








## Simple overview of viral responses{.centered}

![](/cloud/project/results/05_heatmap.png){width=42%}


